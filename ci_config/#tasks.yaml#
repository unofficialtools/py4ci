tasks:

  my-heartbeat:
    enabled: true
    description: test task that check the date every 1h
    queues:
    - default
    tags:
    - heartbeat
    - mdipierro
    triggered_by:
    period: 12h
    debounce: 1m
    priority: 0
    timeout: 180
    command: |
      date && echo '{"status": "success"}' > task.output.json
    authorized_users:
    - mdipierro

  my-repo-change:
    enabled: true
    description: trigger a build on commit
    queues:
    - default
    tags:
    - assignment1
    - mdipierro
    triggered_by:
    - ssh_url: git@github.com:web2py/py4web.git
      branches:
      - master
    priority: 0
    timeout: 180
    command: |
      python 
      make test
    authorized_users:
    - me
