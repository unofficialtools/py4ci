tasks:

  my-heartbeat:
    enabled: true
    description: checks the date every 1h
    queues:
    - default
    tags:
    - heartbeat
    triggered_by:
    period: 1h
    debounce: 1m
    priority: 0
    timeout: 180
    command: |
      date
    authorized_users:
    - me

  my-repo-change:
    enabled: true
    description: list files when repo changes
    queues:
    - default
    tags:
    - repo
    triggered_by:
    - ssh_url: git@github.com:web2py/py4web.git
      branches:
      - master
    priority: 0
    timeout: 180
    command: |
      #git clone https://github.com/web2py/py4web.git
      #pushd py4web
      #ls -l
      #popd
      echo "DONE!"
    authorized_users:
    - me

  my-repo-change-followup:
    enabled: true
    description: just prints done!
    queues:
    - default
    triggered_by:
    - task: my-repo-change
    priority: 0
    timeout: 180
    command: |
      echo "DONE!"
    authorized_users:
    - me
